## Storage > Object Storage > コンソール使用ガイド

## コンテナ
### コンテナ作成
コンテナを作成します。オブジェクトストレージにオブジェクトをアップロードするには1つ以上のコンテナが必要です。

<table class="it" style="padding-top: 15px; padding-bottom: 10px;">
  <tr>
    <th>項目</th>
    <th>説明</th>
  </tr>
  <tr>
    <td>名前</td>
    <td>コンテナ名は英字256文字、日本語85文字に制限されます。</td>
  </tr>
  <tr>
    <td rowspan="2">コンテナアクセスポリシー</td>
    <td><b>PRIVATE</b>：許可されたユーザーのみコンテナ内部のオブジェクトにアクセスできます。</td>
  </tr>
  <tr>
    <td><b>PUBLIC</b>：公開URLから誰でもコンテナ内部のオブジェクトにアクセスできます。</td>
  </tr>
  <tr>
    <td>ストレージクラス</td>
    <td><b>Standard</b>：基本クラスです。</td>
  </tr>  
</table>

### コンテナ削除
選択したコンテナを削除します。コンテナを削除する前にコンテナが空になっているかを確認する必要があります。コンテナ内にオブジェクトが残っている場合は削除できません。

### コンテナ詳細情報
選択したコンテナの詳細情報を照会します。コンテナの基本情報と設定などの情報を確認できます。

### コンテナ設定
選択したコンテナの設定を変更します。

<table class="it" style="padding-top: 15px; padding-bottom: 10px;">
  <tr>
    <th>分類</th>
    <th>項目</th>
    <th>説明</th>
  </tr>
  <tr>
    <td rowspan="2">基本設定</td>
    <td>コンテナアクセスポリシー</td>
    <td><b>PRIVATE</b>と <b>PUBLIC</b>のいずれかのコンテナアクセスポリシーを選択します。 </td>
  </tr>
  <tr>
    <td>オブジェクトのライフサイクル</td>
    <td>オブジェクトのライフサイクルを日単位で入力します。空欄にするとライフサイクル設定が解除されます。</td>
  </tr>

  <tr>
    <td rowspan="3">オブジェクト<br/>バージョン管理ポリシー</td>
    <td>バージョン管理ポリシー</td>
    <td>バージョン管理ポリシーを使用するかどうかを選択します。</td>
  </tr>
  <tr>
    <td>アーカイブコンテナ</td>
    <td>オブジェクトの以前のバージョンを保管するコンテナを入力します。</td>
  </tr>
  <tr>
    <td>アーカイビングオブジェクト<br/>ライフサイクル</td>
    <td>オブジェクトの以前のバージョンのライフサイクルを日単位で入力します。空欄にするとライフサイクル設定が解除されます。</td>
  </tr>
  <tr>
    <td rowspan="3">複製設定</td>
    <td>複製</td>
    <td>複製機能を使用するかどうかを選択します。</td>
  </tr>
  <tr>
    <td>対象リージョン</td>
    <td>現在利用中のリージョン以外の複製する対象リージョンを選択します。</td>
  </tr>
  <tr>
    <td>複製コンテナ</td>
    <td>複製対象コンテナを入力します。</td>
  </tr>
  <tr>
    <td rowspan="5">静的Webサイト設定</td>
    <td>インデックス文書</td>
    <td>静的Webサイトのインデックス文書オブジェクトを入力します。オブジェクトがフォルダ内にある場合、フォルダパスを含めて入力する必要があります。<br/>最大1024バイト、英数字、一部の特殊文字(<code>-</code>, <code>_</code>, <code>.</code>, <code>/</code>)のみ入力できます。</td>
  </tr>
  <tr>
    <td>エラー文書</td>
    <td>静的Webサイトのエラー文書オブジェクトのサフィックス(suffix)を入力します。エラー文書のサフィックスにはフォルダパスを含められません。<br/>最大1024バイト、英数字、一部の特殊文字(<code>-</code>, <code>_</code>, <code>.</code>, <code>/</code>)のみ入力できます。</td>
  </tr>
</table>

#### 基本設定

##### アクセスポリシー

アクセスポリシーでアクセスを制限できます。
* **PRIVATE**：許可されたユーザーのみコンテナ内部のオブジェクトにアクセスできます。
* **PUBLIC**：公開URLを通じて誰でもコンテナ内部のオブジェクトにアクセスできます。

##### オブジェクトライフサイクル

オブジェクトライフサイクルを設定すると、コンテナ内のオブジェクトは入力したライフサイクルが終わった後に自動的に削除されます。

> [参考]
> オブジェクトライフサイクルを設定した後にアップロードしたオブジェクトにのみ適用されます。
#### オブジェクトバージョン管理設定

オブジェクトバージョン管理設定を行って、オブジェクトの以前のバージョンを保管できます。以前のバージョンはオブジェクトをアップデートするときにアーカイブコンテナに保管され、設定から以前のバージョンの寿命を入力できます。
設定したライフサイクルを超えた以前のバージョンは自動的に削除されます。

> [注意]
> アーカイブコンテナをソースコンテナより先に削除すると、ソースコンテナのオブジェクトアップデートまたは削除時にエラーが発生します。すでに削除している場合はアーカイブコンテナを新たに作成するか、ソースコンテナのバージョン管理ポリシーを解除して解決できます。

#### 複製設定

複製設定を行うと、コンテナのオブジェクトを別のリージョンのコンテナに複製できます。複製設定は災害復旧(disaster recovery)のための機能で、ソースリージョンのオブジェクトを対象リージョンに同じように複製して管理します。複製はバックグラウンドで一定のサイクルで行われます。

複製ポリシーは次のとおりです。

* ソースコンテナでオブジェクトを変更(アップロード、アップデート、削除)すると、複製対象コンテナに同じように反映されます。
* 複製対象コンテナで変更されたオブジェクトはソースコンテナに反映されません。
* 複製対象コンテナで複製されたオブジェクトを変更すると、そのオブジェクトはソースオブジェクトに変更があっても複製されない可能性があります。
* 複製対象コンテナは空のコンテナを使用することを推奨します。対象コンテナにソースコンテナのオブジェクトと同じ名前のオブジェクトがすでに存在する場合、複製が円滑に行われない可能性があります。
* 複製対象コンテナを削除すると、同じ名前のコンテナを再度作成しても複製が再開されません。複製を再開するには複製設定をもう一度行う必要があります。
* 複製対象コンテナを別のリージョンに複製したり、他のコンテナの複製対象コンテナに重複設定することはできません。
* 複製設定を**使用しない**に変更すると複製は中断されますが、すでに複製されたオブジェクトは保持されます。
* ソースコンテナと複製対象コンテナの名前を同じにすることを推奨します。コンテナの名前が異なる場合、複製された大容量オブジェクトへのアクセスに失敗する可能性があります。
* マルチパートアップロードした大容量オブジェクトのセグメントオブジェクトが他のコンテナに保存されている場合は、そのコンテナも複製設定を行うと複製された大容量オブジェクトにアクセスできます。

#### 静的Webサイト設定

> コンテナのアクセスポリシーを**PUBLIC**に設定し、インデックス文書とエラー文書を入力すると、コンテナで静的Webサイトをホスティングできます。静的WebサイトURLはコンテナリストで**URLコピー**ボタンをクリックして取得できます。

静的Webサイトのインデックス文書、エラー文書に使用するオブジェクトは、1つ以上の英字、数字または一部特殊文字(`-`, `_`, `.`, `/`)で構成された名前でなければならず、拡張子が`html`のハイパーテキスト形式でなければいけません。この条件を満たさない場合は、設定できなかったり、静的Webサイトが動作しない可能性があります。
> 静的Webサイトのレスポンス文書名は`{エラーコード}{サフィックス}`です。例えばエラー文書を`error.html`に設定している場合、404エラーが発生した時に表示されるエラー文書の名前は`404error.html`になります。各エラーの状況に合わせてエラー文書をアップロードして使用できます。エラー文書を定義していい場合や、レスポンスコードに合ったエラー文書オブジェクトがない場合はWebブラウザの基本エラー文書が表示されます。


## オブジェクト
### フォルダ作成
フォルダを作成します。フォルダはコンテナのオブジェクトをグループにまとめるための仮想の単位です。WindowsのフォルダやLinuxのディレクトリと同じように階層構造でオブジェクトを管理できるようにします。フォルダ名は英字256文字、日本語85文字に制限されます。

> [参考]
> オブジェクトストレージのフォルダはファイルシステムが提供するディレクトリとは概念が異なります。便宜のために提供する疑似(pseudo)フォルダです。フォルダを作成すると、実際には`{フォルダ-名前}/`という空のオブジェクトが作成されます。フォルダ内のオブジェクトは`{フォルダ-名前}/{オブジェクト-名前}`形式の名前を持ちます。オブジェクトコピー機能を利用して新しいフォルダにオブジェクトをコピーすると、`{フォルダ-名前}/`形式の空のオブジェクトではなく、`{フォルダ-名前}/{オブジェクト-名前}`形式のオブジェクトが作成されます。したがって、このコピーされたオブジェクトを削除する場合、フォルダまで削除されたように表示されます。あらかじめ作ったフォルダにコピーする時はフォルダのオブジェクトを削除してもフォルダが残っています。

### フォルダ削除
フォルダを削除します。フォルダを削除する前にフォルダが空になっているか確認する必要があります。フォルダ内にオブジェクトが残っている場合は削除できません。

### オブジェクトアップロード
すべてのオブジェクトはコンテナ内にアップロードする必要があります。オブジェクト1つの最大容量は5GBに制限されます。

> [参考]
> Webコンソールでは5GBを超えるファイルはアップロードできません。アップロードするオブジェクトの容量が5GBを超える場合は、`split`などのコマンドラインツールを使用して分割するか、ユーザーアプリケーションで5GB以下のサイズに分割してアップロードするようにプログラミングする必要があります。詳細な使用方法はAPIガイドの[マルチパートアップロード](api-guide/#_43)を参考にしてください。

### オブジェクトのダウンロード
選択したオブジェクトをダウンロードします。コンテナを作る時、コンテナアクセスポリシーを**PRIVATE**に設定している場合、許可されたユーザーのみオブジェクトにアクセスできます。**PUBLIC**に設定していると、リストで`URLコピー`ボタンを押してオブジェクトの公開URLを確認できます。このURLでオブジェクトのハイパーリンクを作成したり、オブジェクトを直接ダウンロードできます。

<details style="padding-top: 15px; padding-bottom: 10px;">
<summary>ハイパーリンク例</summary>
<ul style="padding-left: 10px; padding-top: 10px;">
<li>Webページ作成</li>

```
# cat > index.html
<html>
<body> hello world!
<a href="https://api-storage.cloud.toast.com/v1/{account}/{container}/{object}">Download</a>
</body>
</html>
```

<li>Python3のhttpモジュールを利用してWebサーバー実行</li>
```
# python -m http.server
Serving HTTP on :: port 8000 (http://[::]:8000/) ...
```

<li>Webブラウザで<b>http://localhost:8000</b>に接続した後、<b>Download</b>を押して正常にファイルがダウンロードできるかを確認</li>

</details>


### オブジェクトのコピー
オブジェクトをコピーして新しいオブジェクトを作成します。コピーするオブジェクトがあるコンテナに新しい名前のオブジェクトを作ったり、他のコンテナにオブジェクトをコピーできます。

> [参考]
> 入力することができるパスの最大長さはオブジェクト名によって変わります。コピーするパスにオブジェクト名を加えた長さが1024バイト以下である必要があります。
> `{パスの最大長さ} = 1024 - {オブジェクト名の長さ} - 1`

### オブジェクトの削除
選択したオブジェクトを削除します。マルチパートオブジェクトを削除するとセグメントオブジェクトも一緒に削除されます。

## プレフィックス検索
検索ウィンドウにプレフィックスを入力して**検索**ボタンを押すと、入力したプレフィックスで始まるコンテナ、フォルダ、オブジェクトを検索できます。コンテナリストではコンテナを、オブジェクトリストではフォルダとオブジェクトを検索します。

## S3 API認証情報
Amazon S3互換APIを使用するための認証情報を発行できます。S3 API認証情報は有効期限がなく、ユーザーごとにプロジェクトあたり最大3個まで発行できます。

> [注意]
> S3 API認証情報キーが漏洩すると、誰でも漏洩したキーを利用してオブジェクトにアクセスできます。キーが漏洩した場合は漏洩した認証情報を削除して、新しく発行して使用することを推奨します。
> 
